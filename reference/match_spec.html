<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Identify and filter spectra — cor_spec • OpenSpecy</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Identify and filter spectra — cor_spec"><meta name="description" content="match_spec() joins two OpenSpecy objects and their metadata
based on similarity.
cor_spec() correlates two OpenSpecy objects, typically one with
knowns and one with unknowns.
ident_spec() retrieves the top match values from a correlation matrix
and formats them with metadata.
get_metadata() retrieves metadata from OpenSpecy objects.
max_cor_named() formats the top correlation values from a correlation
matrix as a named vector.
filter_spec() filters an Open Specy object.
fill_spec() adds filler values to an OpenSpecy object where it doesn't have intensities.
os_similarity() EXPERIMENTAL, returns a single similarity metric between two OpenSpecy objects based on the method used."><meta property="og:description" content="match_spec() joins two OpenSpecy objects and their metadata
based on similarity.
cor_spec() correlates two OpenSpecy objects, typically one with
knowns and one with unknowns.
ident_spec() retrieves the top match values from a correlation matrix
and formats them with metadata.
get_metadata() retrieves metadata from OpenSpecy objects.
max_cor_named() formats the top correlation values from a correlation
matrix as a named vector.
filter_spec() filters an Open Specy object.
fill_spec() adds filler values to an OpenSpecy object where it doesn't have intensities.
os_similarity() EXPERIMENTAL, returns a single similarity metric between two OpenSpecy objects based on the method used."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OpenSpecy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/app.html">Open Specy App Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/sop.html">Open Specy Package Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/advanced.html">Spectroscopy Advanced</a></li>
    <li><a class="dropdown-item" href="../articles/spectragryph.html">File Conversion in SpectraGryph</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wincowgerDEV/OpenSpecy-package/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Identify and filter spectra</h1>
      <small class="dont-index">Source: <a href="https://github.com/wincowgerDEV/OpenSpecy-package/blob/main/R/match_spec.R" class="external-link"><code>R/match_spec.R</code></a></small>
      <div class="d-none name"><code>match_spec.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>match_spec()</code> joins two <code>OpenSpecy</code> objects and their metadata
based on similarity.
<code>cor_spec()</code> correlates two <code>OpenSpecy</code> objects, typically one with
knowns and one with unknowns.
<code>ident_spec()</code> retrieves the top match values from a correlation matrix
and formats them with metadata.
<code>get_metadata()</code> retrieves metadata from OpenSpecy objects.
<code>max_cor_named()</code> formats the top correlation values from a correlation
matrix as a named vector.
<code>filter_spec()</code> filters an Open Specy object.
<code>fill_spec()</code> adds filler values to an <code>OpenSpecy</code> object where it doesn't have intensities.
<code>os_similarity()</code> EXPERIMENTAL, returns a single similarity metric between two OpenSpecy objects based on the method used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cor_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">cor_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'OpenSpecy'</span></span>
<span><span class="fu">cor_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">library</span>, na.rm <span class="op">=</span> <span class="cn">T</span>, conform <span class="op">=</span> <span class="cn">F</span>, type <span class="op">=</span> <span class="st">"roll"</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">match_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">match_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'OpenSpecy'</span></span>
<span><span class="fu">match_spec</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">library</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  conform <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"roll"</span>,</span>
<span>  top_n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_library_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_object_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fill <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ident_spec</span><span class="op">(</span></span>
<span>  <span class="va">cor_matrix</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">library</span>,</span>
<span>  top_n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_library_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_object_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_metadata</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">get_metadata</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'OpenSpecy'</span></span>
<span><span class="fu">get_metadata</span><span class="op">(</span><span class="va">x</span>, <span class="va">logic</span>, rm_empty <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">max_cor_named</span><span class="op">(</span><span class="va">cor_matrix</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">filter_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">filter_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'OpenSpecy'</span></span>
<span><span class="fu">filter_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">logic</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ai_classify</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">ai_classify</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'OpenSpecy'</span></span>
<span><span class="fu">ai_classify</span><span class="op">(</span><span class="va">x</span>, <span class="va">library</span>, fill <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">fill_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">fill_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'OpenSpecy'</span></span>
<span><span class="fu">fill_spec</span><span class="op">(</span><span class="va">x</span>, <span class="va">fill</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">os_similarity</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">os_similarity</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'OpenSpecy'</span></span>
<span><span class="fu">os_similarity</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, method <span class="op">=</span> <span class="st">"hamming"</span>, na.rm <span class="op">=</span> <span class="cn">T</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an <code>OpenSpecy</code> object, typically with unknowns.</p></dd>


<dt id="arg-library">library<a class="anchor" aria-label="anchor" href="#arg-library"></a></dt>
<dd><p>an <code>OpenSpecy</code> or <code>glmnet</code> object representing the
reference library of spectra or model to use in identification.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>logical; indicating whether missing values should be removed
when calculating correlations. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-conform">conform<a class="anchor" aria-label="anchor" href="#arg-conform"></a></dt>
<dd><p>Whether to conform the spectra to the library wavenumbers or not.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>the type of conformation to make returned by <code><a href="conform_spec.html">conform_spec()</a></code></p></dd>


<dt id="arg-top-n">top_n<a class="anchor" aria-label="anchor" href="#arg-top-n"></a></dt>
<dd><p>integer; specifying the number of top matches to return.
If <code>NULL</code> (default), all matches will be returned.</p></dd>


<dt id="arg-order">order<a class="anchor" aria-label="anchor" href="#arg-order"></a></dt>
<dd><p>an <code>OpenSpecy</code> used for sorting, ideally the unprocessed
one; <code>NULL</code> skips sorting.</p></dd>


<dt id="arg-add-library-metadata">add_library_metadata<a class="anchor" aria-label="anchor" href="#arg-add-library-metadata"></a></dt>
<dd><p>name of a column in the library metadata to be
joined; <code>NULL</code> if you don't want to join.</p></dd>


<dt id="arg-add-object-metadata">add_object_metadata<a class="anchor" aria-label="anchor" href="#arg-add-object-metadata"></a></dt>
<dd><p>name of a column in the object metadata to be
joined; <code>NULL</code> if you don't want to join.</p></dd>


<dt id="arg-fill">fill<a class="anchor" aria-label="anchor" href="#arg-fill"></a></dt>
<dd><p>an <code>OpenSpecy</code> object with a single spectrum to be used to
fill missing values for alignment with the AI classification.</p></dd>


<dt id="arg-cor-matrix">cor_matrix<a class="anchor" aria-label="anchor" href="#arg-cor-matrix"></a></dt>
<dd><p>a correlation matrix for object and library,
can be returned by <code>cor_spec()</code></p></dd>


<dt id="arg-logic">logic<a class="anchor" aria-label="anchor" href="#arg-logic"></a></dt>
<dd><p>a logical or numeric vector describing which spectra to keep.</p></dd>


<dt id="arg-rm-empty">rm_empty<a class="anchor" aria-label="anchor" href="#arg-rm-empty"></a></dt>
<dd><p>logical; whether to remove empty columns in the metadata.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>an <code>OpenSpecy</code> object to perform similarity search against x.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>the type of similarity metric to return.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a>()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>match_spec()</code> and <code>ident_spec()</code> will return
a <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table-class.html" class="external-link">data.table-class</a>()</code> containing correlations
between spectra and the library.
The table has three columns: <code>object_id</code>, <code>library_id</code>, and
<code>match_val</code>.
Each row represents a unique pairwise correlation between a spectrum in the
object and a spectrum in the library.
If <code>top_n</code> is specified, only the top <code>top_n</code> matches for each
object spectrum will be returned.
If <code>add_library_metadata</code> is <code>is.character</code>, the library metadata
will be added to the output.
If <code>add_object_metadata</code> is <code>is.character</code>, the object metadata
will be added to the output.
<code>filter_spec()</code> returns an <code>OpenSpecy</code> object.
<code>fill_spec()</code> returns an <code>OpenSpecy</code> object.
<code>cor_spec()</code> returns a correlation matrix.
<code>get_metadata()</code> returns a <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table-class.html" class="external-link">data.table-class</a>()</code>
with the metadata for columns which have information.
<code>os_similarity()</code> returns a single numeric value representing the type
of similarity metric requested. 'wavenumber' similarity is based on the
proportion of wavenumber values that overlap between the two objects,
'metadata' is the proportion of metadata column names,
'hamming' is something similar to the hamming distance where we discretize
all spectra in the OpenSpecy object by wavenumber intensity values and then
relate the wavenumber intensity value distributions by mean difference in
min-max normalized space. 'pca' tests the distance between the OpenSpecy
objects in PCA space using the first 4 component values and calculating the
max-range normalized distance between the mean components. The first two
metrics are pretty straightforward and definitely ready to go, the 'hamming'
and 'pca' metrics are pretty experimental but appear to be working under our
current test cases.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="adj_intens.html">adj_intens</a>()</code> converts spectra;
<code><a href="manage_lib.html">get_lib</a>()</code> retrieves the Open Specy reference library;
<code><a href="manage_lib.html">load_lib</a>()</code> loads the Open Specy reference library into an <span style="R">R</span>
object of choice</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Win Cowger, Zacharias Steinmetz</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_lib"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">unknown</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_ext.html">read_extdata</a></span><span class="op">(</span><span class="st">"ftir_ldpe_soil.asp"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="read_multi.html">read_any</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="conform_spec.html">conform_spec</a></span><span class="op">(</span>range <span class="op">=</span> <span class="va">test_lib</span><span class="op">$</span><span class="va">wavenumber</span>,</span></span>
<span class="r-in"><span>               res <span class="op">=</span> <span class="fu"><a href="spec_res.html">spec_res</a></span><span class="op">(</span><span class="va">test_lib</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="process_spec.html">process_spec</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cor_spec</span><span class="op">(</span><span class="va">unknown</span>, <span class="va">test_lib</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                      intensity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 00002e4e3fac430aa1fdfea6e26f85e4  0.5716650527</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 00061dd49cbb71549cf3d530b894ba92 -0.0524107035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0008a60c1af45a76ffb91b9cbe1a32e4  0.2120038819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 000902ae526db452960c5782843081b4 -0.0574671312</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 00133c1f1531821f815431f72871eae9  0.3424853396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0016677a99407c18717bf5d3eea9a0a2  0.1169383083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 00185609a3205a19225e1530ca98084e -0.0059672577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 001d3eb19976c785442a3e6fa8094bff -0.0063433127</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0026eee747d277edf308194c81179cb0 -0.0563867464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0031bb13faea1e04b52ffbeca009e8ab  0.6675896750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 003b2e57d47a4225b8ea041c946cfc0a -0.0204737255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0046ff947759e247f85dc63a2a25e097  0.0286048318</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0054792a45a11ccf7158fdf2c8873125  0.0889031245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 005c6a81975d747fe493032cac9dfaa2  0.2070905137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0062d71f901713f2ac7a89c72fb186d4  0.2847788255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 00904e33ccbaa20fb68c1943d8303d82  0.0103191160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 00931a5ccadb549d463293381c974d79 -0.0182594153</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 00b9f87c7d7c82675cb945fe4da37917 -0.0874221226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 00f4b09b9823187caf65b781b8be87b9 -0.0943789974</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 010bfd4be6c24ced909f6de717c7b04e  0.0756006101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 015e8a21344a60a020226cfef344c584  0.0279306259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 016961c0d7def12f68239756d23a79a6 -0.0739530912</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 019b8f3e4839f8fda1441f7d712ff12d -0.0088904495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 01b2fea6718855567e2e468a792b457f  0.0519834480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 02b8194bd714469666151a7c6b90b36c  0.0687712268</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 03f1fa06cd6bc468ae5e406ca1d58dbb -0.0560522947</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 041771facd71667d6bd6c9269d3701be  0.0502373982</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0481958e37c72c71f88d80e4dd69ac59  0.0405530434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 058a9af32053d14e876703a60a37498f -0.0172377431</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 05c3cde45098e01cc44da3f72ada913e -0.0586996007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 06a2ed935a9b37b653717ff4a0ea62f7  0.0486159272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 06f7950194c7a42714cec488e378a820  0.1062184336</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 087b8dc9fe95b7cab9d037304f0d39c8 -0.0071308393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 09b69fcfcf3c695299dd0f88743cf14a  0.0693075642</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0b10e6cc01c8e53f2221647a9c828164  0.5492755145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0b8b5f10d7a9b2bd7d702cd4fdfd8a29  0.0198909283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0e815860f0115ac34e2b46ac91e0c096  0.0219596516</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101b6ae86864958ddd95445d0ab01fe4  0.4308809802</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14ee1d85d0b1ee84fab0773329c45bd2 -0.0552288672</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1a31cfc8e25332f4771d03e8a862e217  0.0257980970</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23069d13c090ee5235874bd632467f9c  0.0239585112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 252b6f9c5fb83ec82246bc041cabd221 -0.0160335235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 263479214867d17e135a0d599b1f8354  0.5000294168</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2fa630bec93db824509be188494d79ad  0.1018184192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35ce7ae774d57362dacb92cacd53b01c  0.0057562573</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3d35fd9a2766afaf4c088b615dffc350 -0.0009768496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4762edfa07e6b28a4b90db83594f2b3d -0.0004834032</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4f1d701f4080b4c74acdaa04dea52dd1  0.0682211684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5961a72282786fe43d8704780782f459  0.0629534493</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65792c9e80934e4692540a3e0fbfb552  0.0457114187</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6e013532253522149a0deb04373b79a2  0.1339615512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7167a50e76f4a34dbb1d354babd674b0  0.0387929426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76b3af06ab610907cea4dbe3aa4ec67e  0.0237972406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 889adce6238a677669b6523d74635d03  0.1267896304</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9f91f6441608ecca35f69d298e5351bd  0.0018181040</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a692fd0b8b3b80b640ce4bbea8105570  0.0423592870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ec69350b1b7de35fd6b8cf65048e5fc0  0.1076174781</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">match_spec</span><span class="op">(</span><span class="va">unknown</span>, <span class="va">test_lib</span>, add_library_metadata <span class="op">=</span> <span class="st">"sample_name"</span>,</span></span>
<span class="r-in"><span>           top_n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;library_id&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          library_id object_id match_val     x     y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              &lt;char&gt;    &lt;fctr&gt;     &lt;num&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0031bb13faea1e04b52ffbeca009e8ab intensity 0.6675897    37     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         SpectrumID   Organization SpectrumType SpectrumIdentity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             &lt;char&gt;         &lt;char&gt;       &lt;char&gt;           &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: HDPE_Sarah_#18_1s_20ac_10x_25mW J. Lynch, NIST        Raman             HDPE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Polymer.Category LibraryType  OWNER SpectralCollectionMode Preprocessing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              &lt;char&gt;      &lt;char&gt; &lt;char&gt;                 &lt;char&gt;        &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      polyolefins    Polymers   &lt;NA&gt;                   &lt;NA&gt;          &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    InstrumentUsed RRUFFID IDEAL CHEMISTRY LOCALITY SOURCE STATUS    URL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;char&gt;  &lt;char&gt;          &lt;char&gt;   &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           &lt;NA&gt;    &lt;NA&gt;            &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    MEASURED CHEMISTRY OtherInformation JCAMP-DX YFACTOR YUNITS InstrumentMode</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;char&gt;           &lt;char&gt;   &lt;char&gt;  &lt;char&gt; &lt;char&gt;         &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:               &lt;NA&gt;             &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DELTAX Sponsor  Color   Cell     ID Comment cell_plate_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;  &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;          &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Form..film..foam.pliable..hard.  Brand   Item Location  Notes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             &lt;char&gt; &lt;char&gt; &lt;char&gt;   &lt;char&gt; &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                            &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;     &lt;NA&gt;   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Longest.dimension  Width  Depth Particle.mass..mg. Tg..oC. Tm..oC. Onset....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;char&gt; &lt;char&gt; &lt;char&gt;             &lt;char&gt;  &lt;char&gt;  &lt;char&gt;    &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:              &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;               &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Enthalpy..J.g. Substance   Form Colour Filename SourceDatabase Method...49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;char&gt;    &lt;char&gt; &lt;char&gt; &lt;char&gt;   &lt;char&gt;         &lt;char&gt;      &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;     &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      File  QA/QC Natural /Synthetic Plastic/other framework Abbreviation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt; &lt;char&gt;             &lt;char&gt;        &lt;char&gt;    &lt;char&gt;       &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   &lt;NA&gt;   &lt;NA&gt;               &lt;NA&gt;          &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Source ID Method...57 morphology  color final_polymer_assignment Citation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt;      &lt;char&gt;     &lt;char&gt; &lt;char&gt;                   &lt;char&gt;   &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;   &lt;NA&gt;                     &lt;NA&gt;     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Plate Itteration SpectralResolution InstrumentAccessories Wavenumber_Range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;int&gt;      &lt;int&gt;             &lt;char&gt;                &lt;char&gt;           &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:    NA         NA               &lt;NA&gt;                  &lt;NA&gt;             &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    PIN_ID ORIENTATION ID merged database</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;char&gt;      &lt;char&gt;              &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   &lt;NA&gt;        &lt;NA&gt;                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Database ID WWTP Paper/Kirstie/FLOPPE...70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                         &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                                         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Database ID WWTP Paper/Kirstie/FLOPPE...71 ID (ESM1) Longest_dimension width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                         &lt;int&gt;     &lt;int&gt;             &lt;int&gt; &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                                         NA        NA                NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Cluster2018/WWTP PRESSURE TEMPERATURE MaterialForm MaterialProducer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;int&gt;    &lt;int&gt;       &lt;num&gt;       &lt;char&gt;           &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:               NA       NA          NA         &lt;NA&gt;             &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    NumberofAccumulations   TIME Ratio against background Truncated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    &lt;int&gt; &lt;char&gt;                   &lt;char&gt;    &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                    NA   &lt;NA&gt;                     &lt;NA&gt;      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ElementMultiply or ElementDivide Collection length Apodization</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              &lt;char&gt;            &lt;char&gt;      &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                             &lt;NA&gt;              &lt;NA&gt;        &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Bench serial number Subtraction or Addition Baseline Correction Smooth</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 &lt;char&gt;                  &lt;char&gt;              &lt;char&gt; &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                &lt;NA&gt;                    &lt;NA&gt;                &lt;NA&gt;   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    %Transmittance-&gt;Absorbance Sample gain Number of background scans</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        &lt;char&gt;       &lt;num&gt;                      &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                       &lt;NA&gt;          NA                         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Background gain Sample spacing Number of scan points Resolution points</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              &lt;num&gt;          &lt;num&gt;                 &lt;int&gt;             &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:              NA             NA                    NA                NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Number of FFT points   ZPD Library ID Shortform Grating Hole size (nm)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   &lt;int&gt; &lt;int&gt;               &lt;char&gt;   &lt;int&gt;          &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                   NA    NA                 &lt;NA&gt;      NA             NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Slit (um) Filter (%) Delay (s)   DATE MOLFORM $NIST SOURCE $NIST DOC FILE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;int&gt;      &lt;int&gt;     &lt;int&gt; &lt;char&gt;  &lt;char&gt;       &lt;char&gt;         &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        NA         NA        NA   &lt;NA&gt;    &lt;NA&gt;         &lt;NA&gt;           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    $NIST PSD FILE APERTURE BEAMSPLITTER DETECTOR (DIA. DET. PORT IN SPHERE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;char&gt;   &lt;char&gt;       &lt;char&gt;                              &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           &lt;NA&gt;     &lt;NA&gt;         &lt;NA&gt;                                &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    SPHERE DIAMETER ACQUISITION MODE SCANNER SPEED PHASE CORRECTION ZEROFILLING</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;char&gt;           &lt;char&gt;        &lt;char&gt;           &lt;char&gt;      &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:            &lt;NA&gt;             &lt;NA&gt;          &lt;NA&gt;             &lt;NA&gt;        &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    WAVENUMBER ACCURACY LOW PASS FILTER SWITCH GAIN ON $NIST ID COADDED SCANS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 &lt;char&gt;          &lt;char&gt;         &lt;char&gt;   &lt;char&gt;         &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                &lt;NA&gt;            &lt;NA&gt;           &lt;NA&gt;     &lt;NA&gt;            NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    PHASE RESOLUTION    MW ContactInfo CASNumber MaterialQuality LaserLightUsed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;num&gt; &lt;num&gt;      &lt;char&gt;    &lt;char&gt;          &lt;char&gt;         &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:               NA    NA        &lt;NA&gt;      &lt;NA&gt;            &lt;NA&gt;           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    TotalAcquisitionTime_s DataProcessingProcedure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    &lt;char&gt;                  &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                   &lt;NA&gt;                    &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    LevelofConfidenceinIdentification smoother baseline DENSITY new_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               &lt;char&gt;    &lt;int&gt;    &lt;int&gt;   &lt;num&gt;    &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                              &lt;NA&gt;       NA       NA      NA      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                polymer_class plastic_or_not</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       &lt;char&gt;         &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: Polyolefins (POLYALKENES)        plastic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                   url_polymer_class</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                              &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: https://www.polymerdatabase.com/polymer%20index/polyalkenes.html</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           polymer                                                url_polymer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;char&gt;                                                     &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: POLY(ETHYLENE) https://www.polymerdatabase.com/polymers/polyethylene.html</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                               url_more_info</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                      &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: https://www.polymerdatabase.com/polymer%20classes/Polyolefin%20type.html</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    snr_deriv                          file_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;num&gt;                           &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  1339.684 77f837c1640910f2879184d61ef1df48</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Win Cowger, Zacharias Steinmetz, Hazel Vaquero, Nick Leong, Andrea Faltynkova, Hannah Sherrod, National Renewable Energy Laboratory, Possibility Lab.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

