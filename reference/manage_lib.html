<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Manage spectral libraries — check_lib • OpenSpecy</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Manage spectral libraries — check_lib"><meta name="description" content="These functions will import the spectral libraries from Open Specy if they
were not already downloaded. The CRAN does not allow for deployment of large
datasets so this was a workaround that we are using to make sure everyone can
easily get Open Specy functionality running on their desktop. Please see the
references when using these libraries. These libraries are the accumulation
of a massive amount of effort from independant groups and each should be
attributed when you are using their data."><meta property="og:description" content="These functions will import the spectral libraries from Open Specy if they
were not already downloaded. The CRAN does not allow for deployment of large
datasets so this was a workaround that we are using to make sure everyone can
easily get Open Specy functionality running on their desktop. Please see the
references when using these libraries. These libraries are the accumulation
of a massive amount of effort from independant groups and each should be
attributed when you are using their data."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OpenSpecy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/app.html">Open Specy App Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/sop.html">Open Specy Package Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/advanced.html">Spectroscopy Advanced</a></li>
    <li><a class="dropdown-item" href="../articles/spectragryph.html">File Conversion in SpectraGryph</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wincowgerDEV/OpenSpecy-package/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Manage spectral libraries</h1>
      <small class="dont-index">Source: <a href="https://github.com/wincowgerDEV/OpenSpecy-package/blob/main/R/manage_lib.R" class="external-link"><code>R/manage_lib.R</code></a></small>
      <div class="d-none name"><code>manage_lib.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions will import the spectral libraries from Open Specy if they
were not already downloaded. The CRAN does not allow for deployment of large
datasets so this was a workaround that we are using to make sure everyone can
easily get Open Specy functionality running on their desktop. Please see the
references when using these libraries. These libraries are the accumulation
of a massive amount of effort from independant groups and each should be
attributed when you are using their data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_lib</span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"derivative"</span>, <span class="st">"nobaseline"</span>, <span class="st">"raw"</span>, <span class="st">"medoid_derivative"</span>, <span class="st">"medoid_nobaseline"</span>,</span>
<span>    <span class="st">"model_derivative"</span>, <span class="st">"model_nobaseline"</span><span class="op">)</span>,</span>
<span>  path <span class="op">=</span> <span class="st">"system"</span>,</span>
<span>  condition <span class="op">=</span> <span class="st">"warning"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_lib</span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"derivative"</span>, <span class="st">"nobaseline"</span>, <span class="st">"raw"</span>, <span class="st">"medoid_derivative"</span>, <span class="st">"medoid_nobaseline"</span>,</span>
<span>    <span class="st">"model_derivative"</span>, <span class="st">"model_nobaseline"</span><span class="op">)</span>,</span>
<span>  path <span class="op">=</span> <span class="st">"system"</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"wb"</span>,</span>
<span>  revision <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  aws <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">load_lib</span><span class="op">(</span><span class="va">type</span>, path <span class="op">=</span> <span class="st">"system"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rm_lib</span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"derivative"</span>, <span class="st">"nobaseline"</span>, <span class="st">"raw"</span>, <span class="st">"medoid_derivative"</span>, <span class="st">"medoid_nobaseline"</span>,</span>
<span>    <span class="st">"model_derivative"</span>, <span class="st">"model_nobaseline"</span><span class="op">)</span>,</span>
<span>  path <span class="op">=</span> <span class="st">"system"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>library type to check/retrieve; defaults to
<code>c("derivative", "nobaseline", "raw", "medoid_derivative", "medoid_nobaseline", "model_derivative", "model_nobaseline")</code> which reads
everything.</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>where to save or look for local library files; defaults to
<code>"system"</code> pointing to
<code>system.file("extdata", package = "OpenSpecy")</code>.</p></dd>


<dt id="arg-condition">condition<a class="anchor" aria-label="anchor" href="#arg-condition"></a></dt>
<dd><p>determines if <code>check_lib()</code> should warn
(<code>"warning"</code>, the default) or throw and error (<code>"error"</code>).</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>see <code><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">?download.file</a></code> for details on mode.</p></dd>


<dt id="arg-revision">revision<a class="anchor" aria-label="anchor" href="#arg-revision"></a></dt>
<dd><p>revision number to use for libraries, revision numbers can be found
at the osf repo (https://osf.io/x7dpz/) by clicking the library then history,
if NULL defaults to most recent. This allows exact version control.</p></dd>


<dt id="arg-aws">aws<a class="anchor" aria-label="anchor" href="#arg-aws"></a></dt>
<dd><p>whether to source the files from AWS or OSF, default of FALSE is OSF.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>further arguments passed to <code>osf_download()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>check_lib()</code> and <code>get_lib()</code> return messages only;
<code>load_lib()</code> returns an <code>OpenSpecy</code> object containing the
respective spectral reference library.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>check_lib()</code> checks to see if the Open Specy reference library
already exists on the users computer.
<code>get_lib()</code> downloads the Open Specy library from OSF
(<a href="https://doi.org/10.17605/OSF.IO/X7DPZ" class="external-link">doi:10.17605/OSF.IO/X7DPZ</a>
).
<code>load_lib()</code> will load the library into the global environment for use
with the Open Specy functions.
<code>rm_lib()</code> removes the libraries from your computer.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Bell IB, Clark RJH, Gibbs PJ (2010). “Raman Spectroscopic Library.”
<em>Christopher Ingold Laboratories, University College London, UK</em>.
<a href="https://www.chem.ucl.ac.uk/resources/raman/" class="external-link">https://www.chem.ucl.ac.uk/resources/raman/</a>.</p>
<p>Berzinš K, Sales RE, Barnsley JE, Walker G, Fraser-Miller SJ, Gordon KC
(2020). “Low-Wavenumber Raman Spectral Database of Pharmaceutical
Excipients.” <em>Vibrational Spectroscopy</em> <strong>107</strong>, 103021.
<a href="https://doi.org/10.5281/zenodo.3614035" class="external-link">doi:10.5281/zenodo.3614035</a>
.</p>
<p>Cabernard L, Roscher L, Lorenz C, Gerdts G, Primpke S (2018). “Comparison of
Raman and Fourier Transform Infrared Spectroscopy for the Quantification of
Microplastics in the Aquatic Environment.” <em>Environmental Science &amp;
Technology</em> <strong>52</strong>(22), 13279–13288. <a href="https://doi.org/10.1021/acs.est.8b03438" class="external-link">doi:10.1021/acs.est.8b03438</a>
.</p>
<p>Caggiani MC, Cosentino A, Mangone A (2016). “Pigments Checker version 3.0, a
handy set for conservation scientists: A free online Raman spectra database.”
<em>Microchemical Journal</em> <strong>129</strong>, 123–132.
<a href="https://doi.org/10.1016/j.microc.2016.06.020" class="external-link">doi:10.1016/j.microc.2016.06.020</a>
.</p>
<p>Chabuka BK, Kalivas JH (2020). “Application of a Hybrid Fusion Classification
Process for Identification of Microplastics Based on Fourier Transform
Infrared Spectroscopy. Applied Spectroscopy.” <em>Applied Spectroscopy</em>
<strong>74</strong>(9), 1167–1183. <a href="https://doi.org/10.1177/0003702820923993" class="external-link">doi:10.1177/0003702820923993</a>
.</p>
<p>Cowger, W (2023). “Library data.” <em>OSF</em>. <a href="https://doi.org/10.17605/OSF.IO/X7DPZ" class="external-link">doi:10.17605/OSF.IO/X7DPZ</a>
.</p>
<p>Cowger W, Gray A, Christiansen SH, De Frond H, Deshpande AD, Hemabessiere L,
Lee E, Mill L, et al. (2020). “Critical Review of Processing and
Classification Techniques for Images and Spectra in Microplastic Research.”
<em>Applied Spectroscopy</em>, <strong>74</strong>(9), 989–1010.
<a href="https://doi.org/10.1177/0003702820929064" class="external-link">doi:10.1177/0003702820929064</a>
.</p>
<p>Cowger W, Roscher L, Chamas A, Maurer B, Gehrke L, Jebens H, Gerdts G,
Primpke S (2023). “High Throughput FTIR Analysis of Macro and Microplastics
with Plate Readers.” <em>ChemRxiv Preprint</em>. <a href="https://doi.org/10.26434/chemrxiv-2023-x88ss" class="external-link">doi:10.26434/chemrxiv-2023-x88ss</a>
.</p>
<p>De Frond H, Rubinovitz R, Rochman CM (2021). “µATR-FTIR Spectral Libraries of
Plastic Particles (FLOPP and FLOPP-e) for the Analysis of Microplastics.”
<em>Analytical Chemistry</em> <strong>93</strong>(48), 15878–15885.
<a href="https://doi.org/10.1021/acs.analchem.1c02549" class="external-link">doi:10.1021/acs.analchem.1c02549</a>
.</p>
<p>El Mendili Y, Vaitkus A, Merkys A, Gražulis S, Chateigner D, Mathevet F,
Gascoin S, Petit S, Bardeau JF, Zanatta M, Secchi M, Mariotto G, Kumar A,
Cassetta M, Lutterotti L, Borovin E, Orberger B, Simon P, Hehlen B,
Le Guen M (2019). “Raman Open Database: first interconnected Raman–X-ray
diffraction open-access resource for material identification.” <em>Journal of
Applied Crystallography</em>, <strong>52</strong>(3), 618–625.
<a href="https://doi.org/10.1107/s1600576719004229" class="external-link">doi:10.1107/s1600576719004229</a>
.</p>
<p>Johnson TJ, Blake TA, Brauer CS, Su YF, Bernacki BE, Myers TL, Tonkyn RG,
Kunkel BM, Ertel AB (2015). “Reflectance Spectroscopy for Sample
Identification: Considerations for Quantitative Library
Results at Infrared Wavelengths.” <em>International Conference on Advanced
Vibrational Spectroscopy (ICAVS 8)</em>.
<a href="https://www.osti.gov/biblio/1452877" class="external-link">https://www.osti.gov/biblio/1452877</a>.</p>
<p>Lafuente R, Downs RT, Yang H, Stone N (2016). “The power of databases: The
RRUFF project.” <em>Highlights in Mineralogical Crystallography</em>.
<a href="https://doi.org/10.1515/9783110417104-003" class="external-link">doi:10.1515/9783110417104-003</a>
.</p>
<p>Munno K, De Frond H, O’Donnell B, Rochman CM (2020). “Increasing the
Accessibility for Characterizing Microplastics: Introducing New
Application-Based and Spectral Libraries of Plastic Particles (SLoPP and
SLoPP-E).” <em>Analytical Chemistry</em> <strong>92</strong>(3), 2443–2451.
<a href="https://doi.org/10.1021/acs.analchem.9b03626" class="external-link">doi:10.1021/acs.analchem.9b03626</a>
.</p>
<p>Myers TL, Brauer CS, Su YF, Blake TA, Johnson TJ, Richardson RL (2014).
“The influence of particle size on infrared reflectance spectra.”
<em>Proceedings Volume 9088, Algorithms and Technologies for Multispectral,
Hyperspectral, and Ultraspectral Imagery XX</em>, 908809.
<a href="https://doi.org/10.1117/12.2053350" class="external-link">doi:10.1117/12.2053350</a>
.</p>
<p>Myers TL, Brauer CS, Su YF, Blake TA, Tonkyn RG, Ertel AB, Johnson TJ,
Richardson RL (2015). “Quantitative reflectance spectra of solid powders
as a function of particle size.” <em>Applied Optics</em> <strong>54</strong>(15), 4863–4875.
<a href="https://doi.org/10.1364/ao.54.004863" class="external-link">doi:10.1364/ao.54.004863</a>
.</p>
<p>Primpke S, Wirth M, Lorenz C, Gerdts G (2018). “Reference database design
for the automated analysis of microplastic samples based on Fourier
transform infrared (FTIR) spectroscopy.”
<em>Analytical and Bioanalytical Chemistry</em> <strong>410</strong>, 5131–-5141.
<a href="https://doi.org/10.1007/s00216-018-1156-x" class="external-link">doi:10.1007/s00216-018-1156-x</a>
.</p>
<p>Roscher L, Fehres A, Reisel L, Halbach M, Scholz-Böttcher B, Gerriets M,
Badewien TH, Shiravani G, Wurpts A, Primpke S, Gerdts G (2021). “Abundances
of large microplastics (L-MP, 500-5000 µm) in surface waters of the Weser
estuary and the German North Sea.” <em>PANGAEA</em>. <a href="https://doi.org/10.1594/PANGAEA.938143" class="external-link">doi:10.1594/PANGAEA.938143</a>
.</p>
<p>“Handbook of Raman Spectra for geology” (2023).</p>
<p>“Scientific Workgroup for the Analysis of Seized Drugs.” (2023).
https://swgdrug.org/ir.htm.</p>
<p><strong>Further contribution of spectra:</strong>
Suja Sukumaran (Thermo Fisher Scientific),
Aline Carvalho,
Jennifer Lynch (NIST),
Claudia Cella and Dora Mehn (JRC),
Horiba Scientific,
USDA Soil Characterization Data
(<a href="https://ncsslabdatamart.sc.egov.usda.gov" class="external-link">https://ncsslabdatamart.sc.egov.usda.gov</a>),
Archaeometrielabor,
and S.B. Engelsen (Royal Vet. and Agricultural University, Denmark).
Kimmel Center data was collected and provided by Prof. Steven Weiner
(Kimmel Center for Archaeological Science, Weizmann Institute of Science,
Israel).</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Zacharias Steinmetz, Win Cowger</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">#check to see if you have the library already</span></span></span>
<span class="r-in"><span><span class="fu">check_lib</span><span class="op">(</span><span class="st">"derivative"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#get the library stored in your system from online repo</span></span></span>
<span class="r-in"><span><span class="fu">get_lib</span><span class="op">(</span><span class="st">"derivative"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#load the library into the working environment</span></span></span>
<span class="r-in"><span><span class="va">spec_lib</span> <span class="op">&lt;-</span> <span class="fu">load_lib</span><span class="op">(</span><span class="st">"derivative"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#for models you should choose either both, ftir, or raman as a list item before use</span></span></span>
<span class="r-in"><span><span class="fu">get_lib</span><span class="op">(</span><span class="st">"model_derivative"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod_lib</span> <span class="op">&lt;-</span> <span class="fu">load_lib</span><span class="op">(</span><span class="st">"model_derivative"</span><span class="op">)</span><span class="op">[[</span><span class="st">"ftir"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Win Cowger, Zacharias Steinmetz, Hazel Vaquero, Nick Leong, Andrea Faltynkova, Hannah Sherrod, National Renewable Energy Laboratory, Possibility Lab.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

